{
  "version": 4,
  "terraform_version": "1.1.5",
  "serial": 244,
  "lineage": "991aeee4-a265-3107-b3e1-bcd52eb1c634",
  "outputs": {
    "git_password": {
      "value": "KhWt8rxxR48gtoh5WSatFmeYRlT+KYnpuXzzyalN7e8=",
      "type": "string",
      "sensitive": true
    },
    "git_repo_url": {
      "value": "https://git-codecommit.eu-west-1.amazonaws.com/v1/repos/terraform-assets",
      "type": "string"
    },
    "git_user_name": {
      "value": "gitlab-user-at-978200889980",
      "type": "string"
    },
    "terraform_lock_table": {
      "value": "tf-state-lock",
      "type": "string"
    },
    "terraform_role": {
      "value": "arn:aws:iam::978200889980:role/terraform-assets_terraform_role",
      "type": "string"
    },
    "terraform_state_bucket": {
      "value": "tf-state-20221110110918070500000001",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "978200889980",
            "arn": "arn:aws:sts::978200889980:assumed-role/Administrator/mkaluz-Isengard",
            "id": "978200889980",
            "user_id": "AROA6HQKRBJ6I3EGFZFYT:mkaluz-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy",
      "name": "codebuild_dev_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::aws:policy/AWSCodeBuildDeveloperAccess",
            "description": "Provides access to AWS CodeBuild via the AWS Management Console, but does not allow CodeBuild project administration. Also attach AmazonS3ReadOnlyAccess to provide access to download build artifacts.",
            "id": "arn:aws:iam::aws:policy/AWSCodeBuildDeveloperAccess",
            "name": "AWSCodeBuildDeveloperAccess",
            "path": "/",
            "path_prefix": null,
            "policy": "{\n    \"Statement\": [\n        {\n            \"Action\": [\n                \"codebuild:StartBuild\",\n                \"codebuild:StopBuild\",\n                \"codebuild:StartBuildBatch\",\n                \"codebuild:StopBuildBatch\",\n                \"codebuild:RetryBuild\",\n                \"codebuild:RetryBuildBatch\",\n                \"codebuild:BatchGet*\",\n                \"codebuild:GetResourcePolicy\",\n                \"codebuild:DescribeTestCases\",\n                \"codebuild:DescribeCodeCoverages\",\n                \"codebuild:List*\",\n                \"codecommit:GetBranch\",\n                \"codecommit:GetCommit\",\n                \"codecommit:GetRepository\",\n                \"codecommit:ListBranches\",\n                \"cloudwatch:GetMetricStatistics\",\n                \"events:DescribeRule\",\n                \"events:ListTargetsByRule\",\n                \"events:ListRuleNamesByTarget\",\n                \"logs:GetLogEvents\",\n                \"s3:GetBucketLocation\",\n                \"s3:ListAllMyBuckets\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ssm:PutParameter\"\n            ],\n            \"Resource\": \"arn:aws:ssm:*:*:parameter/CodeBuild/*\"\n        },\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"ssm:StartSession\"\n            ],\n            \"Resource\": \"arn:aws:ecs:*:*:task/*/*\"\n        },\n        {\n            \"Sid\": \"CodeStarConnectionsUserAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"codestar-connections:ListConnections\",\n                \"codestar-connections:GetConnection\"\n            ],\n            \"Resource\": \"arn:aws:codestar-connections:*:*:connection/*\"\n        },\n        {\n            \"Sid\": \"CodeStarNotificationsReadWriteAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"codestar-notifications:CreateNotificationRule\",\n                \"codestar-notifications:DescribeNotificationRule\",\n                \"codestar-notifications:UpdateNotificationRule\",\n                \"codestar-notifications:Subscribe\",\n                \"codestar-notifications:Unsubscribe\"\n            ],\n            \"Resource\": \"*\",\n            \"Condition\": {\n                \"StringLike\": {\n                    \"codestar-notifications:NotificationsForResource\": \"arn:aws:codebuild:*\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"CodeStarNotificationsListAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"codestar-notifications:ListNotificationRules\",\n                \"codestar-notifications:ListEventTypes\",\n                \"codestar-notifications:ListTargets\",\n                \"codestar-notifications:ListTagsforResource\"\n            ],\n            \"Resource\": \"*\"\n        },\n        {\n            \"Sid\": \"SNSTopicListAccess\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"sns:ListTopics\",\n                \"sns:GetTopicAttributes\"\n            ],\n            \"Resource\": \"*\"\n        },\n        { \n           \"Sid\": \"CodeStarNotificationsChatbotAccess\",\n           \"Effect\": \"Allow\", \n           \"Action\": [ \n               \"chatbot:DescribeSlackChannelConfigurations\"\n           ], \n           \"Resource\": \"*\"\n        }\n     ],\n    \"Version\": \"2012-10-17\"\n}",
            "policy_id": "ANPAIMKTMR34XSBQW45HS",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy",
      "name": "codepipeline_full_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::aws:policy/AWSCodePipelineFullAccess",
            "description": "[DEPRECATED] this policy has been removed -- please use [AWSCodePipeline_FullAccess] instead.",
            "id": "arn:aws:iam::aws:policy/AWSCodePipelineFullAccess",
            "name": "AWSCodePipelineFullAccess",
            "path": "/",
            "path_prefix": null,
            "policy": "{\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"codepipeline:*\",\n        \"cloudformation:DescribeStacks\",\n        \"cloudformation:ListChangeSets\",\n        \"cloudtrail:CreateTrail\",\n        \"cloudtrail:DescribeTrails\",\n        \"cloudtrail:GetEventSelectors\",\n        \"cloudtrail:PutEventSelectors\",\n        \"cloudtrail:StartLogging\",\n        \"codebuild:BatchGetProjects\",\n        \"codebuild:CreateProject\",\n        \"codebuild:ListCuratedEnvironmentImages\",\n        \"codebuild:ListProjects\",\n        \"codecommit:GetBranch\",\n        \"codecommit:GetRepositoryTriggers\",\n        \"codecommit:ListBranches\",\n        \"codecommit:ListRepositories\",\n        \"codecommit:PutRepositoryTriggers\",\n        \"codecommit:GetReferences\",\n        \"codedeploy:GetApplication\",\n        \"codedeploy:BatchGetApplications\",\n        \"codedeploy:GetDeploymentGroup\",\n        \"codedeploy:BatchGetDeploymentGroups\",\n        \"codedeploy:ListApplications\",\n        \"codedeploy:ListDeploymentGroups\",\n        \"devicefarm:GetDevicePool\",\n        \"devicefarm:GetProject\",\n        \"devicefarm:ListDevicePools\",\n        \"devicefarm:ListProjects\",\n        \"ec2:DescribeSecurityGroups\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeVpcs\",\n        \"ecr:DescribeRepositories\",\n        \"ecr:ListImages\",\n        \"ecs:ListClusters\",\n        \"ecs:ListServices\",\n        \"elasticbeanstalk:DescribeApplications\",\n        \"elasticbeanstalk:DescribeEnvironments\",\n        \"iam:ListRoles\",\n        \"iam:GetRole\",\n        \"lambda:GetFunctionConfiguration\",\n        \"lambda:ListFunctions\",\n        \"events:ListRules\",\n        \"events:ListTargetsByRule\",\n        \"events:DescribeRule\",\n        \"opsworks:DescribeApps\",\n        \"opsworks:DescribeLayers\",\n        \"opsworks:DescribeStacks\",\n        \"s3:GetBucketPolicy\",\n        \"s3:GetBucketVersioning\",\n        \"s3:GetObjectVersion\",\n        \"s3:ListAllMyBuckets\",\n        \"s3:ListBucket\",\n        \"sns:ListTopics\",\n        \"codestar-notifications:ListNotificationRules\",\n        \"codestar-notifications:ListTargets\",\n        \"codestar-notifications:ListTagsforResource\",\n        \"codestar-notifications:ListEventTypes\",\n        \"states:ListStateMachines\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"s3:GetObject\",\n        \"s3:CreateBucket\",\n        \"s3:PutBucketPolicy\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:s3::*:codepipeline-*\"\n    },\n    {\n      \"Action\": [\n        \"iam:PassRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": [\n        \"arn:aws:iam::*:role/service-role/cwe-role-*\"\n      ],\n      \"Condition\": {\n        \"StringEquals\": {\n          \"iam:PassedToService\": [\n            \"events.amazonaws.com\"\n          ]\n        }\n      }\n    },\n    {\n      \"Action\": [\n        \"iam:PassRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"iam:PassedToService\": [\n            \"codepipeline.amazonaws.com\"\n          ]\n        }\n      }\n    },\n    {\n      \"Action\": [\n        \"events:PutRule\",\n        \"events:PutTargets\",\n        \"events:DeleteRule\",\n        \"events:DisableRule\",\n        \"events:RemoveTargets\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": [\n        \"arn:aws:events:*:*:rule/codepipeline-*\"\n      ]\n    },\n    {\n        \"Sid\": \"CodeStarNotificationsReadWriteAccess\",\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"codestar-notifications:CreateNotificationRule\",\n            \"codestar-notifications:DescribeNotificationRule\",\n            \"codestar-notifications:UpdateNotificationRule\",\n            \"codestar-notifications:DeleteNotificationRule\",\n            \"codestar-notifications:Subscribe\",\n            \"codestar-notifications:Unsubscribe\"\n        ],\n        \"Resource\": \"*\",\n        \"Condition\" : {\n            \"StringLike\" : {\"codestar-notifications:NotificationsForResource\" : \"arn:aws:codepipeline:*\"} \n        }\n    },\n    {\n        \"Sid\": \"CodeStarNotificationsSNSTopicCreateAccess\",\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"sns:CreateTopic\",\n            \"sns:SetTopicAttributes\"\n        ],\n        \"Resource\": \"arn:aws:sns:*:*:codestar-notifications*\"\n    },\n    {\n        \"Sid\": \"CodeStarNotificationsChatbotAccess\",\n        \"Effect\": \"Allow\",\n        \"Action\": [\n            \"chatbot:DescribeSlackChannelConfigurations\"\n        ],\n        \"Resource\": \"*\"\n    }\n  ],\n  \"Version\": \"2012-10-17\"\n}",
            "policy_id": "ANPAJP5LH77KSAT2KHQGG",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_codecommit_repository",
      "name": "infra_repo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:codecommit:eu-west-1:978200889980:terraform-assets",
            "clone_url_http": "https://git-codecommit.eu-west-1.amazonaws.com/v1/repos/terraform-assets",
            "clone_url_ssh": "ssh://git-codecommit.eu-west-1.amazonaws.com/v1/repos/terraform-assets",
            "default_branch": null,
            "description": "IaC Repository",
            "id": "terraform-assets",
            "repository_id": "840ac9f2-cc00-4d8d-8819-376f78ead5bd",
            "repository_name": "terraform-assets",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_codepipeline",
      "name": "codepipeline",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:codepipeline:eu-west-1:978200889980:terraform-assets",
            "artifact_store": [
              {
                "encryption_key": [
                  {
                    "id": "arn:aws:kms:eu-west-1:978200889980:key/8dbe7824-baff-4b74-9640-44a806a73590",
                    "type": "KMS"
                  }
                ],
                "location": "terraform-assets-pipeline-20221109125320610800000001",
                "region": "",
                "type": "S3"
              }
            ],
            "id": "terraform-assets",
            "name": "terraform-assets",
            "role_arn": "arn:aws:iam::978200889980:role/terraform-assets_pipeline_role",
            "stage": [
              {
                "action": [
                  {
                    "category": "Source",
                    "configuration": {
                      "BranchName": "main",
                      "PollForSourceChanges": "false",
                      "RepositoryName": "terraform-assets"
                    },
                    "input_artifacts": [],
                    "name": "Source",
                    "namespace": "",
                    "output_artifacts": [
                      "SourceArtifacts"
                    ],
                    "owner": "AWS",
                    "provider": "CodeCommit",
                    "region": "",
                    "role_arn": "",
                    "run_order": 1,
                    "version": "1"
                  }
                ],
                "name": "Source"
              },
              {
                "action": [
                  {
                    "category": "Build",
                    "configuration": {
                      "EnvironmentVariables": "[{\"name\":\"AWS_ACCOUNT_ID\",\"value\":\"978200889980\"}]",
                      "ProjectName": "arn:aws:codebuild:eu-west-1:978200889980:project/security-review"
                    },
                    "input_artifacts": [
                      "SourceArtifacts"
                    ],
                    "name": "SecurityReview",
                    "namespace": "",
                    "output_artifacts": [],
                    "owner": "AWS",
                    "provider": "CodeBuild",
                    "region": "",
                    "role_arn": "",
                    "run_order": 1,
                    "version": "1"
                  }
                ],
                "name": "SecurityScan"
              },
              {
                "action": [
                  {
                    "category": "Build",
                    "configuration": {
                      "EnvironmentVariables": "[{\"name\":\"AWS_ACCOUNT_ID\",\"value\":\"978200889980\"},{\"name\":\"TERRAFORM_ROLE\",\"value\":\"arn:aws:iam::978200889980:role/terraform-assets_terraform_role\"}]",
                      "ProjectName": "arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build"
                    },
                    "input_artifacts": [
                      "SourceArtifacts"
                    ],
                    "name": "BuildInfra",
                    "namespace": "",
                    "output_artifacts": [],
                    "owner": "AWS",
                    "provider": "CodeBuild",
                    "region": "",
                    "role_arn": "",
                    "run_order": 2,
                    "version": "1"
                  }
                ],
                "name": "Build"
              }
            ],
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "aws_iam_role.terraform-role",
            "data.aws_caller_identity.current",
            "module.artifacts_key.aws_kms_key.key",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy",
            "module.infra-build.aws_codebuild_project.build_project",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.pipeline_bucket.aws_s3_bucket.bucket",
            "module.security-build.aws_codebuild_project.build_project",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "locks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:eu-west-1:978200889980:table/tf-state-lock",
            "attribute": [
              {
                "name": "LockID",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [],
            "hash_key": "LockID",
            "id": "tf-state-lock",
            "local_secondary_index": [],
            "name": "tf-state-lock",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 2,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "",
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 2
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "codecommit_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:policy/codecommit_repo_policy_20221109140128097900000001",
            "description": "Policy to access the infra codecommit repo",
            "id": "arn:aws:iam::978200889980:policy/codecommit_repo_policy_20221109140128097900000001",
            "name": "codecommit_repo_policy_20221109140128097900000001",
            "name_prefix": "codecommit_repo_policy_",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"codecommit:*\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:codecommit:eu-west-1:978200889980:terraform-assets\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA6HQKRBJ6I2ACRKA7C",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codecommit_repository.infra_repo"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "s3_artifacts_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:policy/artifacts_bucket_policy_20221109131344285900000001",
            "description": "Policy to access the S3 bucket artifacts",
            "id": "arn:aws:iam::978200889980:policy/artifacts_bucket_policy_20221109131344285900000001",
            "name": "artifacts_bucket_policy_20221109131344285900000001",
            "name_prefix": "artifacts_bucket_policy_",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:Get*\",\"s3:List*\",\"s3:Put*\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001\",\"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001/*\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA6HQKRBJ6K3V3B3SEZ",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "codebuild-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:role/terraform-assets_build_role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2022-11-09T16:34:59Z",
            "description": "",
            "force_detach_policies": false,
            "id": "terraform-assets_build_role",
            "inline_policy": [
              {
                "name": "logs_policy",
                "policy": "{\"Statement\":[{\"Action\":[\"logs:*\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"]}],\"Version\":\"2012-10-17\"}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::978200889980:policy/artifacts_bucket_policy_20221109131344285900000001",
              "arn:aws:iam::978200889980:policy/codecommit_repo_policy_20221109140128097900000001",
              "arn:aws:iam::aws:policy/AWSCodeBuildDeveloperAccess"
            ],
            "max_session_duration": 3600,
            "name": "terraform-assets_build_role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA6HQKRBJ6CGXMOPJFQ"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "codepipeline-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:role/terraform-assets_pipeline_role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codepipeline.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2022-11-09T16:34:59Z",
            "description": "",
            "force_detach_policies": false,
            "id": "terraform-assets_pipeline_role",
            "inline_policy": [
              {
                "name": "codebuild_policy",
                "policy": "{\"Statement\":[{\"Action\":[\"codebuild:*\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build\",\"arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build/*\",\"arn:aws:codebuild:eu-west-1:978200889980:project/security-review\",\"arn:aws:codebuild:eu-west-1:978200889980:project/security-review/*\"]}],\"Version\":\"2012-10-17\"}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::978200889980:policy/artifacts_bucket_policy_20221109131344285900000001",
              "arn:aws:iam::978200889980:policy/codecommit_repo_policy_20221109140128097900000001",
              "arn:aws:iam::aws:policy/AWSCodePipelineFullAccess"
            ],
            "max_session_duration": 3600,
            "name": "terraform-assets_pipeline_role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA6HQKRBJ6OKNOWRQ3R"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "terraform-role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:role/terraform-assets_terraform_role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::978200889980:role/terraform-assets_build_role\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}",
            "create_date": "2022-11-09T16:35:16Z",
            "description": "",
            "force_detach_policies": false,
            "id": "terraform-assets_terraform_role",
            "inline_policy": [
              {
                "name": "Terraform_policy",
                "policy": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"acm:DeleteCertificate\",\n                \"acm:DescribeCertificate\",\n                \"acm:GetCertificate\",\n                \"acm:ImportCertificate\",\n                \"acm:ListTagsForCertificate\",\n                \"acm:RenewCertificate\",\n                \"acm:RequestCertificate\",\n                \"apigateway:GET\",\n                \"apigateway:PUT\",\n                \"apigateway:PATCH\",\n                \"apigateway:DELETE\",\n                \"apigateway:POST\",\n                \"apigateway:SetWebACL\",\n                \"backup:Create*\",\n                \"backup:Update*\",\n                \"backup:Describe*\",\n                \"backup:Delete*\",\n                \"backup:List*\",\n                \"backup:Get*\",\n                \"backupPlan:Create*\",\n                \"backupPlan:Update*\",\n                \"backupPlan:Describe*\",\n                \"backupPlan:Delete*\",\n                \"backupPlan:List*\",\n                \"backupPlan:Get*\",\n                \"backup-storage:MountCapsule\",\n                \"cloudfront:CreateDistribution\",\n                \"cloudfront:GetDistribution\",\n                \"cloudfront:UpdateDistribution\",\n                \"cloudfront:DeleteDistribution\",\n                \"cloudfront:CreateInvalidation\",\n                \"cloudfront:CreateCloudFrontOriginAccessIdentity\",\n                \"cloudfront:UpdateCloudFrontOriginAccessIdentity\",\n                \"cloudfront:DeleteCloudFrontOriginAccessIdentity\",\n                \"cloudfront:GetCloudFrontOriginAccessIdentity\",\n                \"cloudfront:ListTagsForResource\",\n                \"cloudfront:TagResource\",\n                \"codecommit:GetRepository\",\n                \"codecommit:ListTagsForResource\",\n                \"codecommit:CreateRepository\",\n                \"codecommit:DeleteRepository\",\n                \"codebuild:DeleteProject\",\n                \"codebuild:BatchGetProjects\",\n                \"codebuild:UpdateProject\",\n                \"codebuild:CreateProject\",\n                \"codepipeline:DeletePipeline\",\n                \"codepipeline:GetPipeline\",\n                \"codepipeline:UpdatePipeline\",\n                \"codepipeline:CreatePipeline\",\n                \"codepipeline:ListTagsForResource\",\n                \"codepipeline:CreatePipeline\",\n                \"cognito-idp:DescribeUserPool\",\n                \"cognito-idp:DescribeUserPoolClient\",\n                \"cognito-idp:CreateUserPoolClient\",\n                \"cognito-idp:CreateUserPool\",\n                \"cognito-idp:GetUserPoolMfaConfig\",\n                \"cognito-idp:UpdateUserPoolClient\",\n                \"cognito-idp:CreateUserPoolDomain\",\n                \"cognito-idp:DescribeUserPoolDomain\",\n                \"cognito-idp:DeleteUserPoolDomain\",\n                \"cognito-idp:DeleteUserPool\",\n                \"cognito-idp:DeleteUserPoolClient\",\n                \"cognito-idp:DeleteUserPoolDomain\",\n                \"dynamodb:CreateTable\",\n                \"dynamodb:DeleteItem\",\n                \"dynamodb:DeleteTable\",\n                \"dynamodb:UpdateTable\",\n                \"dynamodb:DescribeContinuousBackups\",\n                \"dynamodb:DescribeTable\",\n                \"dynamodb:DescribeTimeToLive\",\n                \"dynamodb:GetItem\",\n                \"dynamodb:ListTagsOfResource\",\n                \"dynamodb:PutItem\",\n                \"dynamodb:TagResource\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:UpdateContinuousBackups\",\n                \"ec2:Create*\",\n                \"ec2:Delete*\",\n                \"ec2:Update*\",\n                \"ec2:Get*\",\n                \"ec2:Describe*\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ecr:ListTagsForResource\",\n                \"events:DescribeEventBus\",\n                \"events:DeleteRule\",\n                \"events:DescribeRule\",\n                \"events:EnableRule\",\n                \"events:ListRules\",\n                \"events:ListTargetsByRule\",\n                \"events:Put*\",\n                \"events:CreateEventBus\",\n                \"events:RemoveTargets\",\n                \"iam:AddRoleToInstanceProfile\",\n                \"iam:AttachRolePolicy\",\n                \"iam:CreateAccountAlias\",\n                \"iam:CreateInstanceProfile\",\n                \"iam:CreateOpenIDConnectProvider\",\n                \"iam:CreatePolicy\",\n                \"iam:CreateRole\",\n                \"iam:CreateServiceLinkedRole\",\n                \"iam:DeleteAccountAlias\",\n                \"iam:DeleteInstanceProfile\",\n                \"iam:DeleteOpenIDConnectProvider\",\n                \"iam:DeletePolicy\",\n                \"iam:DeletePolicyVersion\",\n                \"iam:DeleteRole\",\n                \"iam:DeleteRolePolicy\",\n                \"iam:DetachRolePolicy\",\n                \"iam:GetInstanceProfile\",\n                \"iam:GetOpenIDConnectProvider\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\",\n                \"iam:GetRolePolicy\",\n                \"iam:ListAccountAliases\",\n                \"iam:ListAttachedRolePolicies\",\n                \"iam:ListInstanceProfilesForRole\",\n                \"iam:ListOpenIDConnectProviders\",\n                \"iam:ListPolicies\",\n                \"iam:ListPolicyVersions\",\n                \"iam:ListRolePolicies\",\n                \"iam:ListRoles\",\n                \"iam:PassRole\",\n                \"iam:PutRolePolicy\",\n                \"iam:PutUserPolicy\",\n                \"iam:RemoveRoleFromInstanceProfile\",\n                \"iam:TagInstanceProfile\",\n                \"iam:TagOpenIDConnectProvider\",\n                \"iam:TagPolicy\",\n                \"iam:TagRole\",\n                \"iam:UntagOpenIDConnectProvider\",\n                \"iam:UntagPolicy\",\n                \"iam:UntagRole\",\n                \"iam:UpdateRole\",\n                \"iam:CreatePolicyVersion\",\n                \"kms:UpdateKeyDescription\",\n                \"kms:CreateAlias\",\n                \"kms:CreateGrant\",\n                \"kms:CreateKey\",\n                \"kms:DeleteAlias\",\n                \"kms:DescribeKey\",\n                \"kms:DisableKey\",\n                \"kms:EnableKey\",\n                \"kms:EnableKeyRotation\",\n                \"kms:GenerateDataKey\",\n                \"kms:GenerateDataKeyWithoutPlaintext\",\n                \"kms:GetKeyPolicy\",\n                \"kms:GetKeyRotationStatus\",\n                \"kms:ListAliases\",\n                \"kms:ListKeyPolicies\",\n                \"kms:ListKeys\",\n                \"kms:ListResourceTags\",\n                \"kms:PutKeyPolicy\",\n                \"kms:ScheduleKeyDeletion\",\n                \"kms:TagResource\",\n                \"lambda:CreateFunction\",\n                \"lambda:CreateAlias\",\n                \"lambda:UpdateAlias\",\n                \"lambda:Get*\",\n                \"lambda:ListVersionsByFunction\",\n                \"lambda:InvokeFunction\",\n                \"lambda:PublishVersion\",\n                \"lambda:DeleteFunction\",\n                \"lambda:UpdateFunctionConfiguration\",\n                \"lambda:UpdateFunctionCode\",\n                \"lambda:Delete*\",\n                \"lambda:RemovePermission\",\n                \"lambda:AddPermission\",\n                \"logs:CreateLogGroup\",\n                \"logs:DeleteLogGroup\",\n                \"logs:DescribeLogGroups\",\n                \"logs:ListTagsLogGroup\",\n                \"logs:PutRetentionPolicy\",\n                \"organizations:Describe*\",\n                \"organizations:List*\",\n                \"rds:Create*\",\n                \"rds:Update*\",\n                \"rds:Describe*\",\n                \"rds:Delete*\",\n                \"rds:List*\",\n                \"rds:ModifyDBCluster\",\n                \"rds:ModifyDBInstance\",\n                \"route53:AssociateVPCWithHostedZone\",\n                \"route53:ChangeResourceRecordSets\",\n                \"route53:CreateHostedZone\",\n                \"route53:DeleteHostedZone\",\n                \"route53:GetChange\",\n                \"route53:GetHostedZone\",\n                \"route53:ListHostedZones\",\n                \"route53:ListHostedZonesByName\",\n                \"route53:ListResourceRecordSets\",\n                \"route53:ListTagsForResource\",\n                \"route53:ListTagsForResources\",\n                \"s3:AbortMultipartUpload\",\n                \"s3:CreateBucket\",\n                \"s3:CreateJob\",\n                \"s3:DeleteBucket\",\n                \"s3:DeleteBucketPolicy\",\n                \"s3:DeleteObject\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:Get*\",\n                \"s3:ListAllMyBuckets\",\n                \"s3:ListBucket\",\n                \"s3:ListBucketMultipartUploads\",\n                \"s3:ListMultipartUploadParts\",\n                \"s3:PutAccelerateConfiguration\",\n                \"s3:PutAccountPublicAccessBlock\",\n                \"s3:PutAnalyticsConfiguration\",\n                \"s3:PutBucketAcl\",\n                \"s3:PutBucketCORS\",\n                \"s3:PutBucketLogging\",\n                \"s3:PutBucketPolicy\",\n                \"s3:PutBucketPublicAccessBlock\",\n                \"s3:PutBucketTagging\",\n                \"s3:PutBucketVersioning\",\n                \"s3:PutBucketWebsite\",\n                \"s3:PutEncryptionConfiguration\",\n                \"s3:PutLifecycleConfiguration\",\n                \"s3:PutObject\",\n                \"s3:PutObjectRetention\",\n                \"secretsmanager:Create*\",\n                \"secretsmanager:Get*\",\n                \"secretsmanager:Update*\",\n                \"secretsmanager:Delete*\",\n                \"secretsmanager:Describe*\",\n                \"secretsmanager:Put*\",\n                \"wafv2:CreateWebACL\",\n                \"wafv2:DeleteWebACL\",\n                \"wafv2:UpdateWebACL\",\n                \"wafv2:GetWebACL\",\n                \"wafv2:ListTagsForResource\",\n                \"wafv2:AssociateWebACL\",\n                \"wafv2:GetWebACLForResource\",\n                \"wafv2:AssociateWebACL\",\n                \"wafv2:CreateIPSet\",\n                \"wafv2:CreateWebACL\",\n                \"wafv2:DeleteIPSet\",\n                \"wafv2:DeleteLoggingConfiguration\",\n                \"wafv2:DeleteWebACL\",\n                \"wafv2:DisassociateWebACL\",\n                \"wafv2:GetIPSet\",\n                \"wafv2:GetLoggingConfiguration\",\n                \"wafv2:GetWebACL\",\n                \"wafv2:ListIPSets\",\n                \"wafv2:ListWebACLs\",\n                \"wafv2:UpdateIPSet\",\n                \"wafv2:UpdateWebACL\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "terraform-assets_terraform_role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA6HQKRBJ6CNCJ5PSZB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "cloudwatch_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_build_role:logs_policy",
            "name": "logs_policy",
            "name_prefix": null,
            "policy": "{\"Statement\":[{\"Action\":[\"logs:*\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"]}],\"Version\":\"2012-10-17\"}",
            "role": "terraform-assets_build_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "codebuild_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_pipeline_role:codebuild_policy",
            "name": "codebuild_policy",
            "name_prefix": null,
            "policy": "{\"Statement\":[{\"Action\":[\"codebuild:*\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build\",\"arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build/*\",\"arn:aws:codebuild:eu-west-1:978200889980:project/security-review\",\"arn:aws:codebuild:eu-west-1:978200889980:project/security-review/*\"]}],\"Version\":\"2012-10-17\"}",
            "role": "terraform-assets_pipeline_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "module.infra-build.aws_codebuild_project.build_project",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.security-build.aws_codebuild_project.build_project",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "terraform-policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_terraform_role:Terraform_policy",
            "name": "Terraform_policy",
            "name_prefix": null,
            "policy": "{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"VisualEditor0\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"acm:DeleteCertificate\",\n                \"acm:DescribeCertificate\",\n                \"acm:GetCertificate\",\n                \"acm:ImportCertificate\",\n                \"acm:ListTagsForCertificate\",\n                \"acm:RenewCertificate\",\n                \"acm:RequestCertificate\",\n                \"apigateway:GET\",\n                \"apigateway:PUT\",\n                \"apigateway:PATCH\",\n                \"apigateway:DELETE\",\n                \"apigateway:POST\",\n                \"apigateway:SetWebACL\",\n                \"backup:Create*\",\n                \"backup:Update*\",\n                \"backup:Describe*\",\n                \"backup:Delete*\",\n                \"backup:List*\",\n                \"backup:Get*\",\n                \"backupPlan:Create*\",\n                \"backupPlan:Update*\",\n                \"backupPlan:Describe*\",\n                \"backupPlan:Delete*\",\n                \"backupPlan:List*\",\n                \"backupPlan:Get*\",\n                \"backup-storage:MountCapsule\",\n                \"cloudfront:CreateDistribution\",\n                \"cloudfront:GetDistribution\",\n                \"cloudfront:UpdateDistribution\",\n                \"cloudfront:DeleteDistribution\",\n                \"cloudfront:CreateInvalidation\",\n                \"cloudfront:CreateCloudFrontOriginAccessIdentity\",\n                \"cloudfront:UpdateCloudFrontOriginAccessIdentity\",\n                \"cloudfront:DeleteCloudFrontOriginAccessIdentity\",\n                \"cloudfront:GetCloudFrontOriginAccessIdentity\",\n                \"cloudfront:ListTagsForResource\",\n                \"cloudfront:TagResource\",\n                \"codecommit:GetRepository\",\n                \"codecommit:ListTagsForResource\",\n                \"codecommit:CreateRepository\",\n                \"codecommit:DeleteRepository\",\n                \"codebuild:DeleteProject\",\n                \"codebuild:BatchGetProjects\",\n                \"codebuild:UpdateProject\",\n                \"codebuild:CreateProject\",\n                \"codepipeline:DeletePipeline\",\n                \"codepipeline:GetPipeline\",\n                \"codepipeline:UpdatePipeline\",\n                \"codepipeline:CreatePipeline\",\n                \"codepipeline:ListTagsForResource\",\n                \"codepipeline:CreatePipeline\",\n                \"cognito-idp:DescribeUserPool\",\n                \"cognito-idp:DescribeUserPoolClient\",\n                \"cognito-idp:CreateUserPoolClient\",\n                \"cognito-idp:CreateUserPool\",\n                \"cognito-idp:GetUserPoolMfaConfig\",\n                \"cognito-idp:UpdateUserPoolClient\",\n                \"cognito-idp:CreateUserPoolDomain\",\n                \"cognito-idp:DescribeUserPoolDomain\",\n                \"cognito-idp:DeleteUserPoolDomain\",\n                \"cognito-idp:DeleteUserPool\",\n                \"cognito-idp:DeleteUserPoolClient\",\n                \"cognito-idp:DeleteUserPoolDomain\",\n                \"dynamodb:CreateTable\",\n                \"dynamodb:DeleteItem\",\n                \"dynamodb:DeleteTable\",\n                \"dynamodb:UpdateTable\",\n                \"dynamodb:DescribeContinuousBackups\",\n                \"dynamodb:DescribeTable\",\n                \"dynamodb:DescribeTimeToLive\",\n                \"dynamodb:GetItem\",\n                \"dynamodb:ListTagsOfResource\",\n                \"dynamodb:PutItem\",\n                \"dynamodb:TagResource\",\n                \"dynamodb:UpdateItem\",\n                \"dynamodb:UpdateContinuousBackups\",\n                \"ec2:Create*\",\n                \"ec2:Delete*\",\n                \"ec2:Update*\",\n                \"ec2:Get*\",\n                \"ec2:Describe*\",\n                \"ec2:RevokeSecurityGroupEgress\",\n                \"ec2:AuthorizeSecurityGroupIngress\",\n                \"ecr:ListTagsForResource\",\n                \"events:DescribeEventBus\",\n                \"events:DeleteRule\",\n                \"events:DescribeRule\",\n                \"events:EnableRule\",\n                \"events:ListRules\",\n                \"events:ListTargetsByRule\",\n                \"events:Put*\",\n                \"events:CreateEventBus\",\n                \"events:RemoveTargets\",\n                \"iam:AddRoleToInstanceProfile\",\n                \"iam:AttachRolePolicy\",\n                \"iam:CreateAccountAlias\",\n                \"iam:CreateInstanceProfile\",\n                \"iam:CreateOpenIDConnectProvider\",\n                \"iam:CreatePolicy\",\n                \"iam:CreateRole\",\n                \"iam:CreateServiceLinkedRole\",\n                \"iam:DeleteAccountAlias\",\n                \"iam:DeleteInstanceProfile\",\n                \"iam:DeleteOpenIDConnectProvider\",\n                \"iam:DeletePolicy\",\n                \"iam:DeletePolicyVersion\",\n                \"iam:DeleteRole\",\n                \"iam:DeleteRolePolicy\",\n                \"iam:DetachRolePolicy\",\n                \"iam:GetInstanceProfile\",\n                \"iam:GetOpenIDConnectProvider\",\n                \"iam:GetPolicy\",\n                \"iam:GetPolicyVersion\",\n                \"iam:GetRole\",\n                \"iam:GetRolePolicy\",\n                \"iam:ListAccountAliases\",\n                \"iam:ListAttachedRolePolicies\",\n                \"iam:ListInstanceProfilesForRole\",\n                \"iam:ListOpenIDConnectProviders\",\n                \"iam:ListPolicies\",\n                \"iam:ListPolicyVersions\",\n                \"iam:ListRolePolicies\",\n                \"iam:ListRoles\",\n                \"iam:PassRole\",\n                \"iam:PutRolePolicy\",\n                \"iam:PutUserPolicy\",\n                \"iam:RemoveRoleFromInstanceProfile\",\n                \"iam:TagInstanceProfile\",\n                \"iam:TagOpenIDConnectProvider\",\n                \"iam:TagPolicy\",\n                \"iam:TagRole\",\n                \"iam:UntagOpenIDConnectProvider\",\n                \"iam:UntagPolicy\",\n                \"iam:UntagRole\",\n                \"iam:UpdateRole\",\n                \"iam:CreatePolicyVersion\",\n                \"kms:UpdateKeyDescription\",\n                \"kms:CreateAlias\",\n                \"kms:CreateGrant\",\n                \"kms:CreateKey\",\n                \"kms:DeleteAlias\",\n                \"kms:DescribeKey\",\n                \"kms:DisableKey\",\n                \"kms:EnableKey\",\n                \"kms:EnableKeyRotation\",\n                \"kms:GenerateDataKey\",\n                \"kms:GenerateDataKeyWithoutPlaintext\",\n                \"kms:GetKeyPolicy\",\n                \"kms:GetKeyRotationStatus\",\n                \"kms:ListAliases\",\n                \"kms:ListKeyPolicies\",\n                \"kms:ListKeys\",\n                \"kms:ListResourceTags\",\n                \"kms:PutKeyPolicy\",\n                \"kms:ScheduleKeyDeletion\",\n                \"kms:TagResource\",\n                \"lambda:CreateFunction\",\n                \"lambda:CreateAlias\",\n                \"lambda:UpdateAlias\",\n                \"lambda:Get*\",\n                \"lambda:ListVersionsByFunction\",\n                \"lambda:InvokeFunction\",\n                \"lambda:PublishVersion\",\n                \"lambda:DeleteFunction\",\n                \"lambda:UpdateFunctionConfiguration\",\n                \"lambda:UpdateFunctionCode\",\n                \"lambda:Delete*\",\n                \"lambda:RemovePermission\",\n                \"lambda:AddPermission\",\n                \"logs:CreateLogGroup\",\n                \"logs:DeleteLogGroup\",\n                \"logs:DescribeLogGroups\",\n                \"logs:ListTagsLogGroup\",\n                \"logs:PutRetentionPolicy\",\n                \"organizations:Describe*\",\n                \"organizations:List*\",\n                \"rds:Create*\",\n                \"rds:Update*\",\n                \"rds:Describe*\",\n                \"rds:Delete*\",\n                \"rds:List*\",\n                \"rds:ModifyDBCluster\",\n                \"rds:ModifyDBInstance\",\n                \"route53:AssociateVPCWithHostedZone\",\n                \"route53:ChangeResourceRecordSets\",\n                \"route53:CreateHostedZone\",\n                \"route53:DeleteHostedZone\",\n                \"route53:GetChange\",\n                \"route53:GetHostedZone\",\n                \"route53:ListHostedZones\",\n                \"route53:ListHostedZonesByName\",\n                \"route53:ListResourceRecordSets\",\n                \"route53:ListTagsForResource\",\n                \"route53:ListTagsForResources\",\n                \"s3:AbortMultipartUpload\",\n                \"s3:CreateBucket\",\n                \"s3:CreateJob\",\n                \"s3:DeleteBucket\",\n                \"s3:DeleteBucketPolicy\",\n                \"s3:DeleteObject\",\n                \"s3:DeleteObjectVersion\",\n                \"s3:Get*\",\n                \"s3:ListAllMyBuckets\",\n                \"s3:ListBucket\",\n                \"s3:ListBucketMultipartUploads\",\n                \"s3:ListMultipartUploadParts\",\n                \"s3:PutAccelerateConfiguration\",\n                \"s3:PutAccountPublicAccessBlock\",\n                \"s3:PutAnalyticsConfiguration\",\n                \"s3:PutBucketAcl\",\n                \"s3:PutBucketCORS\",\n                \"s3:PutBucketLogging\",\n                \"s3:PutBucketPolicy\",\n                \"s3:PutBucketPublicAccessBlock\",\n                \"s3:PutBucketTagging\",\n                \"s3:PutBucketVersioning\",\n                \"s3:PutBucketWebsite\",\n                \"s3:PutEncryptionConfiguration\",\n                \"s3:PutLifecycleConfiguration\",\n                \"s3:PutObject\",\n                \"s3:PutObjectRetention\",\n                \"secretsmanager:Create*\",\n                \"secretsmanager:Get*\",\n                \"secretsmanager:Update*\",\n                \"secretsmanager:Delete*\",\n                \"secretsmanager:Describe*\",\n                \"secretsmanager:Put*\",\n                \"wafv2:CreateWebACL\",\n                \"wafv2:DeleteWebACL\",\n                \"wafv2:UpdateWebACL\",\n                \"wafv2:GetWebACL\",\n                \"wafv2:ListTagsForResource\",\n                \"wafv2:AssociateWebACL\",\n                \"wafv2:GetWebACLForResource\",\n                \"wafv2:AssociateWebACL\",\n                \"wafv2:CreateIPSet\",\n                \"wafv2:CreateWebACL\",\n                \"wafv2:DeleteIPSet\",\n                \"wafv2:DeleteLoggingConfiguration\",\n                \"wafv2:DeleteWebACL\",\n                \"wafv2:DisassociateWebACL\",\n                \"wafv2:GetIPSet\",\n                \"wafv2:GetLoggingConfiguration\",\n                \"wafv2:GetWebACL\",\n                \"wafv2:ListIPSets\",\n                \"wafv2:ListWebACLs\",\n                \"wafv2:UpdateIPSet\",\n                \"wafv2:UpdateWebACL\"\n            ],\n            \"Resource\": \"*\"\n        }\n    ]\n}",
            "role": "terraform-assets_terraform_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.terraform-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cb_attach_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_build_role-20221109163500536800000006",
            "policy_arn": "arn:aws:iam::aws:policy/AWSCodeBuildDeveloperAccess",
            "role": "terraform-assets_build_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "data.aws_iam_policy.codebuild_dev_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cb_attach_policy_cc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_build_role-20221109163500525300000004",
            "policy_arn": "arn:aws:iam::978200889980:policy/artifacts_bucket_policy_20221109131344285900000001",
            "role": "terraform-assets_build_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_policy.s3_artifacts_policy",
            "aws_iam_role.codebuild-role",
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cb_attach_policy_s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_build_role-20221109163500530600000005",
            "policy_arn": "arn:aws:iam::978200889980:policy/codecommit_repo_policy_20221109140128097900000001",
            "role": "terraform-assets_build_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codecommit_repository.infra_repo",
            "aws_iam_policy.codecommit_policy",
            "aws_iam_role.codebuild-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cp_attach_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_pipeline_role-20221109163500165100000003",
            "policy_arn": "arn:aws:iam::aws:policy/AWSCodePipelineFullAccess",
            "role": "terraform-assets_pipeline_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codepipeline-role",
            "data.aws_iam_policy.codepipeline_full_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cp_attach_policy_cc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_pipeline_role-20221109163500147000000002",
            "policy_arn": "arn:aws:iam::978200889980:policy/artifacts_bucket_policy_20221109131344285900000001",
            "role": "terraform-assets_pipeline_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_policy.s3_artifacts_policy",
            "aws_iam_role.codepipeline-role",
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cp_attach_policy_s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_pipeline_role-20221109163500141200000001",
            "policy_arn": "arn:aws:iam::978200889980:policy/codecommit_repo_policy_20221109140128097900000001",
            "role": "terraform-assets_pipeline_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codecommit_repository.infra_repo",
            "aws_iam_policy.codecommit_policy",
            "aws_iam_role.codepipeline-role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_service_specific_credential",
      "name": "code_commit",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "codecommit.amazonaws.com:gitlab-user:ACCA6HQKRBJ6EQ253Y7TF",
            "service_name": "codecommit.amazonaws.com",
            "service_password": "KhWt8rxxR48gtoh5WSatFmeYRlT+KYnpuXzzyalN7e8=",
            "service_specific_credential_id": "ACCA6HQKRBJ6EQ253Y7TF",
            "service_user_name": "gitlab-user-at-978200889980",
            "status": "Active",
            "user_name": "gitlab-user"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_user.gitlab_user"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_user",
      "name": "gitlab_user",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:user/gitlab-user",
            "force_destroy": false,
            "id": "gitlab-user",
            "name": "gitlab-user",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AIDA6HQKRBJ6GIORDMS6C"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_user_policy",
      "name": "access_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "gitlab-user:CodeCommit_Access_Policy",
            "name": "CodeCommit_Access_Policy",
            "name_prefix": null,
            "policy": "{\"Statement\":[{\"Action\":[\"codecommit:BatchGet*\",\"codecommit:BatchDescribe*\",\"codecommit:Describe*\",\"codecommit:EvaluatePullRequestApprovalRules\",\"codecommit:Get*\",\"codecommit:List*\",\"codecommit:Git*\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:codecommit:eu-west-1:978200889980:terraform-assets\"}],\"Version\":\"2012-10-17\"}",
            "user": "gitlab-user"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codecommit_repository.infra_repo",
            "aws_iam_user.gitlab_user"
          ]
        }
      ]
    },
    {
      "module": "module.artifacts_key",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "978200889980",
            "arn": "arn:aws:sts::978200889980:assumed-role/Administrator/mkaluz-Isengard",
            "id": "978200889980",
            "user_id": "AROA6HQKRBJ6I3EGFZFYT:mkaluz-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.artifacts_key",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "default_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "2639588178",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Admin Access\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:role/terraform-assets_pipeline_role\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:role/terraform-assets_build_role\"\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::978200889980:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Admin Access"
              },
              {
                "actions": [
                  "kms:Decrypt*",
                  "kms:Describe*",
                  "kms:Encrypt*",
                  "kms:GenerateDataKey*",
                  "kms:ReEncrypt*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::978200889980:role/terraform-assets_pipeline_role"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": ""
              },
              {
                "actions": [
                  "kms:Decrypt*",
                  "kms:Describe*",
                  "kms:Encrypt*",
                  "kms:GenerateDataKey*",
                  "kms:ReEncrypt*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::978200889980:role/terraform-assets_build_role"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.artifacts_key",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Ireland)",
            "endpoint": "ec2.eu-west-1.amazonaws.com",
            "id": "eu-west-1",
            "name": "eu-west-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.artifacts_key",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:978200889980:alias/cicd/terraform-assets",
            "id": "alias/cicd/terraform-assets",
            "name": "alias/cicd/terraform-assets",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:eu-west-1:978200889980:key/8dbe7824-baff-4b74-9640-44a806a73590",
            "target_key_id": "8dbe7824-baff-4b74-9640-44a806a73590"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "module.artifacts_key.aws_kms_key.key",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.artifacts_key",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:978200889980:key/8dbe7824-baff-4b74-9640-44a806a73590",
            "bypass_policy_lockout_safety_check": false,
            "custom_key_store_id": "",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": 10,
            "description": "KMS key for the CICD pipeline and build(s)",
            "enable_key_rotation": true,
            "id": "8dbe7824-baff-4b74-9640-44a806a73590",
            "is_enabled": true,
            "key_id": "8dbe7824-baff-4b74-9640-44a806a73590",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Admin Access\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:role/terraform-assets_pipeline_role\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:role/terraform-assets_build_role\"\n      }\n    }\n  ]\n}",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.infra-build",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "978200889980",
            "arn": "arn:aws:sts::978200889980:assumed-role/Administrator/mkaluz-Isengard",
            "id": "978200889980",
            "user_id": "AROA6HQKRBJ6I3EGFZFYT:mkaluz-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.infra-build",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Ireland)",
            "endpoint": "ec2.eu-west-1.amazonaws.com",
            "id": "eu-west-1",
            "name": "eu-west-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.infra-build",
      "mode": "managed",
      "type": "aws_codebuild_project",
      "name": "build_project",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build",
            "artifacts": [
              {
                "artifact_identifier": "",
                "bucket_owner_access": "",
                "encryption_disabled": false,
                "location": "",
                "name": "infrastructure-build",
                "namespace_type": "",
                "override_artifact_name": false,
                "packaging": "NONE",
                "path": "",
                "type": "CODEPIPELINE"
              }
            ],
            "badge_enabled": false,
            "badge_url": "",
            "build_batch_config": [],
            "build_timeout": 60,
            "cache": [
              {
                "location": "",
                "modes": [],
                "type": "NO_CACHE"
              }
            ],
            "concurrent_build_limit": 0,
            "description": "",
            "encryption_key": "arn:aws:kms:eu-west-1:978200889980:key/a95e9e44-6882-4987-9a0d-647bd0d577aa",
            "environment": [
              {
                "certificate": "",
                "compute_type": "BUILD_GENERAL1_SMALL",
                "environment_variable": [],
                "image": "aws/codebuild/amazonlinux2-x86_64-standard:2.0",
                "image_pull_credentials_type": "CODEBUILD",
                "privileged_mode": true,
                "registry_credential": [],
                "type": "LINUX_CONTAINER"
              }
            ],
            "file_system_locations": [],
            "id": "arn:aws:codebuild:eu-west-1:978200889980:project/infrastructure-build",
            "logs_config": [
              {
                "cloudwatch_logs": [
                  {
                    "group_name": "infrastructure-build-log-group",
                    "status": "ENABLED",
                    "stream_name": ""
                  }
                ],
                "s3_logs": [
                  {
                    "bucket_owner_access": "",
                    "encryption_disabled": false,
                    "location": "",
                    "status": "DISABLED"
                  }
                ]
              }
            ],
            "name": "infrastructure-build",
            "project_visibility": "PRIVATE",
            "public_project_alias": "",
            "queued_timeout": 480,
            "resource_access_role": "",
            "secondary_artifacts": [],
            "secondary_source_version": [],
            "secondary_sources": [],
            "service_role": "arn:aws:iam::978200889980:role/terraform-assets_build_role",
            "source": [
              {
                "auth": [],
                "build_status_config": [],
                "buildspec": "buildspec.yml",
                "git_clone_depth": 0,
                "git_submodules_config": [],
                "insecure_ssl": false,
                "location": "",
                "report_build_status": false,
                "type": "CODEPIPELINE"
              }
            ],
            "source_version": "",
            "tags": {},
            "tags_all": {},
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.infra-build.module.key",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "978200889980",
            "arn": "arn:aws:sts::978200889980:assumed-role/Administrator/mkaluz-Isengard",
            "id": "978200889980",
            "user_id": "AROA6HQKRBJ6I3EGFZFYT:mkaluz-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.infra-build.module.key",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "default_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "3248814211",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Admin Access\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"Service\": \"codebuild.eu-west-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:SourceAccount\": \"978200889980\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::978200889980:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Admin Access"
              },
              {
                "actions": [
                  "kms:Decrypt*",
                  "kms:Describe*",
                  "kms:Encrypt*",
                  "kms:GenerateDataKey*",
                  "kms:ReEncrypt*"
                ],
                "condition": [
                  {
                    "test": "StringEquals",
                    "values": [
                      "978200889980"
                    ],
                    "variable": "aws:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "codebuild.eu-west-1.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.infra-build.module.key",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Ireland)",
            "endpoint": "ec2.eu-west-1.amazonaws.com",
            "id": "eu-west-1",
            "name": "eu-west-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.infra-build.module.key",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:978200889980:alias/codebuild/infrastructure-build",
            "id": "alias/codebuild/infrastructure-build",
            "name": "alias/codebuild/infrastructure-build",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:eu-west-1:978200889980:key/a95e9e44-6882-4987-9a0d-647bd0d577aa",
            "target_key_id": "a95e9e44-6882-4987-9a0d-647bd0d577aa"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.infra-build.module.key",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:978200889980:key/a95e9e44-6882-4987-9a0d-647bd0d577aa",
            "bypass_policy_lockout_safety_check": false,
            "custom_key_store_id": "",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": 10,
            "description": "KMS key for the infrastructure-build CodeBuild project",
            "enable_key_rotation": true,
            "id": "a95e9e44-6882-4987-9a0d-647bd0d577aa",
            "is_enabled": true,
            "key_id": "a95e9e44-6882-4987-9a0d-647bd0d577aa",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Admin Access\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"Service\": \"codebuild.eu-west-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:SourceAccount\": \"978200889980\"\n        }\n      }\n    }\n  ]\n}",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "757912045",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"DenyNonHttpsTrafic\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [\n        \"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001/*\",\n        \"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001\"\n      ],\n      \"Principal\": \"*\",\n      \"Condition\": {\n        \"Bool\": {\n          \"aws:SecureTransport\": \"false\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:*"
                ],
                "condition": [
                  {
                    "test": "Bool",
                    "values": [
                      "false"
                    ],
                    "variable": "aws:SecureTransport"
                  }
                ],
                "effect": "Deny",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "*"
                  }
                ],
                "resources": [
                  "arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001",
                  "arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001/*"
                ],
                "sid": "DenyNonHttpsTrafic"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001",
            "bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "bucket_domain_name": "terraform-assets-pipeline-20221109125320610800000001.s3.amazonaws.com",
            "bucket_prefix": "terraform-assets-pipeline-",
            "bucket_regional_domain_name": "terraform-assets-pipeline-20221109125320610800000001.s3.eu-west-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "ad160b17cbfc6df06fe80c405a511c05ef98209ace70174d4c00b8a2c882e80b",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z1BKCTXD74EZPE",
            "id": "terraform-assets-pipeline-20221109125320610800000001",
            "lifecycle_rule": [],
            "logging": [
              {
                "target_bucket": "terraform-assets-pipeline-20221109125320610800000001",
                "target_prefix": "log/"
              }
            ],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonHttpsTrafic\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":[\"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001/*\",\"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001\"],\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
            "region": "eu-west-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_logging",
      "name": "logging",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "expected_bucket_owner": "",
            "id": "terraform-assets-pipeline-20221109125320610800000001",
            "target_bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "target_grant": [],
            "target_prefix": "log/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "bucket_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "id": "terraform-assets-pipeline-20221109125320610800000001",
            "policy": "{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001/*\",\"arn:aws:s3:::terraform-assets-pipeline-20221109125320610800000001\"],\"Sid\":\"DenyNonHttpsTrafic\"}],\"Version\":\"2012-10-17\"}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.pipeline_bucket.aws_s3_bucket.bucket",
            "module.pipeline_bucket.data.aws_iam_policy_document.policy"
          ]
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "public_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "id": "terraform-assets-pipeline-20221109125320610800000001",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_server_side_encryption_configuration",
      "name": "sse_conf",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "expected_bucket_owner": "",
            "id": "terraform-assets-pipeline-20221109125320610800000001",
            "rule": [
              {
                "apply_server_side_encryption_by_default": [
                  {
                    "kms_master_key_id": "",
                    "sse_algorithm": "aws:kms"
                  }
                ],
                "bucket_key_enabled": false
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.pipeline_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "versioning",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "terraform-assets-pipeline-20221109125320610800000001",
            "expected_bucket_owner": "",
            "id": "terraform-assets-pipeline-20221109125320610800000001",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.pipeline_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.security-build",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "978200889980",
            "arn": "arn:aws:sts::978200889980:assumed-role/Administrator/mkaluz-Isengard",
            "id": "978200889980",
            "user_id": "AROA6HQKRBJ6I3EGFZFYT:mkaluz-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.security-build",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Ireland)",
            "endpoint": "ec2.eu-west-1.amazonaws.com",
            "id": "eu-west-1",
            "name": "eu-west-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.security-build",
      "mode": "managed",
      "type": "aws_codebuild_project",
      "name": "build_project",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:codebuild:eu-west-1:978200889980:project/security-review",
            "artifacts": [
              {
                "artifact_identifier": "",
                "bucket_owner_access": "",
                "encryption_disabled": false,
                "location": "",
                "name": "security-review",
                "namespace_type": "",
                "override_artifact_name": false,
                "packaging": "NONE",
                "path": "",
                "type": "CODEPIPELINE"
              }
            ],
            "badge_enabled": false,
            "badge_url": "https://codebuild.eu-west-1.amazonaws.com/badges?uuid=eyJlbmNyeXB0ZWREYXRhIjoiMHZvZllwSW9tVERmYjlHSjNRMVdpa0tpS2RxZFVzVmxmenlPOEVROVF3YlAwbzY2dEdmSWsydEphdXhVaGlPUS8zVHZPbGZYSzlQZVlGcVJ0Mzl1cDVBPSIsIml2UGFyYW1ldGVyU3BlYyI6InFjYzBXTXNNaC9iY2FiV2IiLCJtYXRlcmlhbFNldFNlcmlhbCI6MX0%3D\u0026branch=main",
            "build_batch_config": [],
            "build_timeout": 60,
            "cache": [
              {
                "location": "",
                "modes": [],
                "type": "NO_CACHE"
              }
            ],
            "concurrent_build_limit": 0,
            "description": "",
            "encryption_key": "arn:aws:kms:eu-west-1:978200889980:key/31344574-3bdc-4eca-a33a-314692d8fe43",
            "environment": [
              {
                "certificate": "",
                "compute_type": "BUILD_GENERAL1_SMALL",
                "environment_variable": [],
                "image": "aws/codebuild/amazonlinux2-x86_64-standard:2.0",
                "image_pull_credentials_type": "CODEBUILD",
                "privileged_mode": true,
                "registry_credential": [],
                "type": "LINUX_CONTAINER"
              }
            ],
            "file_system_locations": [],
            "id": "arn:aws:codebuild:eu-west-1:978200889980:project/security-review",
            "logs_config": [
              {
                "cloudwatch_logs": [
                  {
                    "group_name": "security-review-log-group",
                    "status": "ENABLED",
                    "stream_name": ""
                  }
                ],
                "s3_logs": [
                  {
                    "bucket_owner_access": "",
                    "encryption_disabled": false,
                    "location": "",
                    "status": "DISABLED"
                  }
                ]
              }
            ],
            "name": "security-review",
            "project_visibility": "PRIVATE",
            "public_project_alias": "eyJlbmNyeXB0ZWREYXRhIjoiWnJjUWd1c0FrbDd4Ny9WL2Q1MTlxdmIzK0pBVjlGdUZxVEUwZWZONEpwcXo4U1BnazZab1VENGMwWnNxS2hNODRYMjFjWlE2QVcwRjJoTzBtb0poVGhZQ3AwemVjSy9KSWQrckVEai82RFU9IiwiaXZQYXJhbWV0ZXJTcGVjIjoicjBQREZZeHp1aXVwTWpneCIsIm1hdGVyaWFsU2V0U2VyaWFsIjoxfQ%3D%3D",
            "queued_timeout": 480,
            "resource_access_role": "",
            "secondary_artifacts": [],
            "secondary_source_version": [],
            "secondary_sources": [],
            "service_role": "arn:aws:iam::978200889980:role/terraform-assets_build_role",
            "source": [
              {
                "auth": [],
                "build_status_config": [],
                "buildspec": "buildspec-sec.yml",
                "git_clone_depth": 0,
                "git_submodules_config": [],
                "insecure_ssl": false,
                "location": "",
                "report_build_status": false,
                "type": "CODEPIPELINE"
              }
            ],
            "source_version": "",
            "tags": {},
            "tags_all": {},
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.codebuild-role",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.security-build.module.key",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "978200889980",
            "arn": "arn:aws:sts::978200889980:assumed-role/Administrator/mkaluz-Isengard",
            "id": "978200889980",
            "user_id": "AROA6HQKRBJ6I3EGFZFYT:mkaluz-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.security-build.module.key",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "default_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "3248814211",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Admin Access\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"Service\": \"codebuild.eu-west-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:SourceAccount\": \"978200889980\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::978200889980:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Admin Access"
              },
              {
                "actions": [
                  "kms:Decrypt*",
                  "kms:Describe*",
                  "kms:Encrypt*",
                  "kms:GenerateDataKey*",
                  "kms:ReEncrypt*"
                ],
                "condition": [
                  {
                    "test": "StringEquals",
                    "values": [
                      "978200889980"
                    ],
                    "variable": "aws:SourceAccount"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "codebuild.eu-west-1.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.security-build.module.key",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Europe (Ireland)",
            "endpoint": "ec2.eu-west-1.amazonaws.com",
            "id": "eu-west-1",
            "name": "eu-west-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.security-build.module.key",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:978200889980:alias/codebuild/security-review",
            "id": "alias/codebuild/security-review",
            "name": "alias/codebuild/security-review",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:eu-west-1:978200889980:key/31344574-3bdc-4eca-a33a-314692d8fe43",
            "target_key_id": "31344574-3bdc-4eca-a33a-314692d8fe43"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.security-build.module.key",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:eu-west-1:978200889980:key/31344574-3bdc-4eca-a33a-314692d8fe43",
            "bypass_policy_lockout_safety_check": false,
            "custom_key_store_id": "",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": 10,
            "description": "KMS key for the security-review CodeBuild project",
            "enable_key_rotation": true,
            "id": "31344574-3bdc-4eca-a33a-314692d8fe43",
            "is_enabled": true,
            "key_id": "31344574-3bdc-4eca-a33a-314692d8fe43",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Admin Access\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::978200889980:root\"\n      }\n    },\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"Service\": \"codebuild.eu-west-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:SourceAccount\": \"978200889980\"\n        }\n      }\n    }\n  ]\n}",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "83007714",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"DenyNonHttpsTrafic\",\n      \"Effect\": \"Deny\",\n      \"Action\": \"s3:*\",\n      \"Resource\": [\n        \"arn:aws:s3:::tf-state-20221110110918070500000001/*\",\n        \"arn:aws:s3:::tf-state-20221110110918070500000001\"\n      ],\n      \"Principal\": \"*\",\n      \"Condition\": {\n        \"Bool\": {\n          \"aws:SecureTransport\": \"false\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "s3:*"
                ],
                "condition": [
                  {
                    "test": "Bool",
                    "values": [
                      "false"
                    ],
                    "variable": "aws:SecureTransport"
                  }
                ],
                "effect": "Deny",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "*"
                  }
                ],
                "resources": [
                  "arn:aws:s3:::tf-state-20221110110918070500000001",
                  "arn:aws:s3:::tf-state-20221110110918070500000001/*"
                ],
                "sid": "DenyNonHttpsTrafic"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::tf-state-20221110110918070500000001",
            "bucket": "tf-state-20221110110918070500000001",
            "bucket_domain_name": "tf-state-20221110110918070500000001.s3.amazonaws.com",
            "bucket_prefix": "tf-state-",
            "bucket_regional_domain_name": "tf-state-20221110110918070500000001.s3.eu-west-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "ad160b17cbfc6df06fe80c405a511c05ef98209ace70174d4c00b8a2c882e80b",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z1BKCTXD74EZPE",
            "id": "tf-state-20221110110918070500000001",
            "lifecycle_rule": [],
            "logging": [
              {
                "target_bucket": "tf-state-20221110110918070500000001",
                "target_prefix": "log/"
              }
            ],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"DenyNonHttpsTrafic\",\"Effect\":\"Deny\",\"Principal\":\"*\",\"Action\":\"s3:*\",\"Resource\":[\"arn:aws:s3:::tf-state-20221110110918070500000001/*\",\"arn:aws:s3:::tf-state-20221110110918070500000001\"],\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}}}]}",
            "region": "eu-west-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "aws:kms"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {},
            "tags_all": {},
            "timeouts": null,
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_logging",
      "name": "logging",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "tf-state-20221110110918070500000001",
            "expected_bucket_owner": "",
            "id": "tf-state-20221110110918070500000001",
            "target_bucket": "tf-state-20221110110918070500000001",
            "target_grant": [],
            "target_prefix": "log/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.tf_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "bucket_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "tf-state-20221110110918070500000001",
            "id": "tf-state-20221110110918070500000001",
            "policy": "{\"Statement\":[{\"Action\":\"s3:*\",\"Condition\":{\"Bool\":{\"aws:SecureTransport\":\"false\"}},\"Effect\":\"Deny\",\"Principal\":\"*\",\"Resource\":[\"arn:aws:s3:::tf-state-20221110110918070500000001/*\",\"arn:aws:s3:::tf-state-20221110110918070500000001\"],\"Sid\":\"DenyNonHttpsTrafic\"}],\"Version\":\"2012-10-17\"}"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.tf_bucket.aws_s3_bucket.bucket",
            "module.tf_bucket.data.aws_iam_policy_document.policy"
          ]
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "public_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "tf-state-20221110110918070500000001",
            "id": "tf-state-20221110110918070500000001",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.tf_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_server_side_encryption_configuration",
      "name": "sse_conf",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "tf-state-20221110110918070500000001",
            "expected_bucket_owner": "",
            "id": "tf-state-20221110110918070500000001",
            "rule": [
              {
                "apply_server_side_encryption_by_default": [
                  {
                    "kms_master_key_id": "",
                    "sse_algorithm": "aws:kms"
                  }
                ],
                "bucket_key_enabled": false
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.tf_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.tf_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "versioning",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "tf-state-20221110110918070500000001",
            "expected_bucket_owner": "",
            "id": "tf-state-20221110110918070500000001",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.tf_bucket.aws_s3_bucket.bucket"
          ]
        }
      ]
    },
    {
      "module": "module.trigger",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2172028019",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"codepipeline:StartPipelineExecution\",\n      \"Resource\": \"arn:aws:codepipeline:eu-west-1:978200889980:terraform-assets\"\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "codepipeline:StartPipelineExecution"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:codepipeline:eu-west-1:978200889980:terraform-assets"
                ],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.trigger",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "rule",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:events:eu-west-1:978200889980:rule/terraform-assets_trigger_20221109164537061200000002",
            "description": "Event to automatically start the pipeline when a change occurs in the AWS CodeCommit source repository and branch. Deleting this may prevent changes from being detected in that pipeline. Read more: http://docs.aws.amazon.com/codepipeline/latest/userguide/pipelines-about-starting.html",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"event\":[\"referenceCreated\",\"referenceUpdated\"],\"referenceName\":[\"main\"],\"referenceType\":[\"branch\"]},\"detail-type\":[\"CodeCommit Repository State Change\"],\"resources\":[\"arn:aws:codecommit:eu-west-1:978200889980:terraform-assets\"],\"source\":[\"aws.codecommit\"]}",
            "id": "terraform-assets_trigger_20221109164537061200000002",
            "is_enabled": true,
            "name": "terraform-assets_trigger_20221109164537061200000002",
            "name_prefix": "terraform-assets_trigger_",
            "role_arn": "",
            "schedule_expression": "",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codecommit_repository.infra_repo",
            "aws_codepipeline.codepipeline",
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "aws_iam_role.terraform-role",
            "data.aws_caller_identity.current",
            "module.artifacts_key.aws_kms_key.key",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy",
            "module.infra-build.aws_codebuild_project.build_project",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.pipeline_bucket.aws_s3_bucket.bucket",
            "module.security-build.aws_codebuild_project.build_project",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.trigger",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:codepipeline:eu-west-1:978200889980:terraform-assets",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "http_target": [],
            "id": "terraform-assets_trigger_20221109164537061200000002-TriggerCodePipeline",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "arn:aws:iam::978200889980:role/terraform-assets_trigger_role",
            "rule": "terraform-assets_trigger_20221109164537061200000002",
            "run_command_targets": [],
            "sqs_target": [],
            "target_id": "TriggerCodePipeline"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_codecommit_repository.infra_repo",
            "aws_codepipeline.codepipeline",
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "aws_iam_role.terraform-role",
            "data.aws_caller_identity.current",
            "module.artifacts_key.aws_kms_key.key",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy",
            "module.infra-build.aws_codebuild_project.build_project",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.pipeline_bucket.aws_s3_bucket.bucket",
            "module.security-build.aws_codebuild_project.build_project",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.trigger.aws_cloudwatch_event_rule.rule",
            "module.trigger.aws_iam_role.role"
          ]
        }
      ]
    },
    {
      "module": "module.trigger",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::978200889980:role/terraform-assets_trigger_role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"events.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2022-11-09T16:47:09Z",
            "description": "",
            "force_detach_policies": false,
            "id": "terraform-assets_trigger_role",
            "inline_policy": [
              {
                "name": "start_code_pipeline",
                "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"codepipeline:StartPipelineExecution\",\n      \"Resource\": \"arn:aws:codepipeline:eu-west-1:978200889980:terraform-assets\"\n    }\n  ]\n}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "terraform-assets_trigger_role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "tags_all": {},
            "unique_id": "AROA6HQKRBJ6N6KXTG2RV"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codepipeline.codepipeline",
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "aws_iam_role.terraform-role",
            "data.aws_caller_identity.current",
            "module.artifacts_key.aws_kms_key.key",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy",
            "module.infra-build.aws_codebuild_project.build_project",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.pipeline_bucket.aws_s3_bucket.bucket",
            "module.security-build.aws_codebuild_project.build_project",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy"
          ]
        }
      ]
    },
    {
      "module": "module.trigger",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "terraform-assets_trigger_role:start_code_pipeline",
            "name": "start_code_pipeline",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"codepipeline:StartPipelineExecution\",\n      \"Resource\": \"arn:aws:codepipeline:eu-west-1:978200889980:terraform-assets\"\n    }\n  ]\n}",
            "role": "terraform-assets_trigger_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_codepipeline.codepipeline",
            "aws_iam_role.codebuild-role",
            "aws_iam_role.codepipeline-role",
            "aws_iam_role.terraform-role",
            "data.aws_caller_identity.current",
            "module.artifacts_key.aws_kms_key.key",
            "module.artifacts_key.data.aws_caller_identity.current",
            "module.artifacts_key.data.aws_iam_policy_document.default_policy",
            "module.infra-build.aws_codebuild_project.build_project",
            "module.infra-build.data.aws_region.current",
            "module.infra-build.module.key.aws_kms_key.key",
            "module.infra-build.module.key.data.aws_caller_identity.current",
            "module.infra-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.pipeline_bucket.aws_s3_bucket.bucket",
            "module.security-build.aws_codebuild_project.build_project",
            "module.security-build.data.aws_region.current",
            "module.security-build.module.key.aws_kms_key.key",
            "module.security-build.module.key.data.aws_caller_identity.current",
            "module.security-build.module.key.data.aws_iam_policy_document.default_policy",
            "module.trigger.aws_iam_role.role",
            "module.trigger.data.aws_iam_policy_document.policy"
          ]
        }
      ]
    }
  ]
}
